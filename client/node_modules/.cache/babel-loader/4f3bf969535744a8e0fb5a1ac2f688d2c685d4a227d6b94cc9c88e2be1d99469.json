{"ast":null,"code":"var _process$env$REACT_AP;import React,{useState}from\"react\";import axios from\"axios\";// Use relative URL for API (works on both local and production)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BASE_URL=(_process$env$REACT_AP=process.env.REACT_APP_API_URL)!==null&&_process$env$REACT_AP!==void 0?_process$env$REACT_AP:\"http://localhost:3000\";const AddOrder=()=>{const[transactionID,setTransactionID]=useState(\"\");const[clientName,setClientName]=useState(\"\");const[clientContact,setClientContact]=useState(\"\");const[paintType,setPaintType]=useState(\"\");const[colorCode,setColorCode]=useState(\"\");const[category,setCategory]=useState(\"New Mix\");const[loading,setLoading]=useState(false);const[message,setMessage]=useState(\"\");const handleSubmit=async e=>{e.preventDefault();setLoading(true);setMessage(\"\");const newOrder={transaction_id:transactionID,client_name:clientName,// âœ… Fixes inconsistency with backend  \nclient_contact:clientContact,paint_type:paintType,color_code:category===\"New Mix\"?\"Pending\":colorCode||\"N/A\",// âœ… Fixes `color_code` casing  \ncategory,start_time:new Date().toISOString(),estimated_completion:\"N/A\",current_status:\"Waiting\"};try{const response=await axios.post(\"\".concat(BASE_URL,\"/api/orders\"),newOrder);if(response.data&&response.data.transaction_id){setMessage(\"âœ… Order added successfully!\");// Reset form\nsetTransactionID(\"\");setClientName(\"\");setClientContact(\"\");setPaintType(\"\");setColorCode(\"\");setCategory(\"New Mix\");}else{setMessage(\"ðŸš¨ Error: Order data missing in response!\");}}catch(error){var _error$response,_error$response$data;setMessage(\"ðŸš¨ Error adding order: \"+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message));}finally{setLoading(false);}};const isFormValid=transactionID&&clientName&&clientContact&&paintType&&category;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add New Order\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:transactionID,onChange:e=>setTransactionID(e.target.value),placeholder:\"Transaction ID\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientName,onChange:e=>setClientName(e.target.value),placeholder:\"Client Name\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientContact,onChange:e=>setClientContact(e.target.value),placeholder:\"Client Contact\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:paintType,onChange:e=>setPaintType(e.target.value),placeholder:\"Paint Type\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:colorCode,onChange:e=>setColorCode(e.target.value),placeholder:\"Color Code\"}),/*#__PURE__*/_jsxs(\"select\",{value:category,onChange:e=>setCategory(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"New Mix\",children:\"New Mix\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Reorder Mix\",children:\"Reorder Mix\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Colour Code\",children:\"Colour Code\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!isFormValid||loading,children:loading?\"Submitting...\":\"Submit Order\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{children:message})]});};export default AddOrder;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","BASE_URL","_process$env$REACT_AP","process","env","REACT_APP_API_URL","AddOrder","transactionID","setTransactionID","clientName","setClientName","clientContact","setClientContact","paintType","setPaintType","colorCode","setColorCode","category","setCategory","loading","setLoading","message","setMessage","handleSubmit","e","preventDefault","newOrder","transaction_id","client_name","client_contact","paint_type","color_code","start_time","Date","toISOString","estimated_completion","current_status","response","post","concat","data","error","_error$response","_error$response$data","isFormValid","children","onSubmit","type","value","onChange","target","placeholder","required","disabled"],"sources":["C:/Sites/pqueue/client/src/Add_Order.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n// Use relative URL for API (works on both local and production)\r\nconst BASE_URL = process.env.REACT_APP_API_URL ?? \"http://localhost:3000\";\r\n\r\nconst AddOrder = () => {\r\n    const [transactionID, setTransactionID] = useState(\"\");\r\n    const [clientName, setClientName] = useState(\"\");\r\n    const [clientContact, setClientContact] = useState(\"\");\r\n    const [paintType, setPaintType] = useState(\"\");\r\n    const [colorCode, setColorCode] = useState(\"\");\r\n    const [category, setCategory] = useState(\"New Mix\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [message, setMessage] = useState(\"\");\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setMessage(\"\");\r\n\r\n       const newOrder = {  \r\n            transaction_id: transactionID,  \r\n            client_name: clientName,  // âœ… Fixes inconsistency with backend  \r\n            client_contact: clientContact,  \r\n            paint_type: paintType,  \r\n            color_code: category === \"New Mix\" ? \"Pending\" : colorCode || \"N/A\",  // âœ… Fixes `color_code` casing  \r\n            category,  \r\n            start_time: new Date().toISOString(),  \r\n            estimated_completion: \"N/A\",  \r\n            current_status: \"Waiting\"  \r\n        };\r\n\r\n        try {\r\n            const response = await axios.post(`${BASE_URL}/api/orders`, newOrder);\r\n            if (response.data && response.data.transaction_id) {\r\n                setMessage(\"âœ… Order added successfully!\");\r\n                // Reset form\r\n                setTransactionID(\"\");\r\n                setClientName(\"\");\r\n                setClientContact(\"\");\r\n                setPaintType(\"\");\r\n                setColorCode(\"\");\r\n                setCategory(\"New Mix\");\r\n            } else {\r\n                setMessage(\"ðŸš¨ Error: Order data missing in response!\");\r\n            }\r\n        } catch (error) {\r\n            setMessage(\"ðŸš¨ Error adding order: \" + (error.response?.data?.error || error.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const isFormValid = transactionID && clientName && clientContact && paintType && category;\r\n\r\n    return (\r\n        <div>\r\n            <h2>Add New Order</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <input type=\"text\" value={transactionID} onChange={(e) => setTransactionID(e.target.value)} placeholder=\"Transaction ID\" required />\r\n                <input type=\"text\" value={clientName} onChange={(e) => setClientName(e.target.value)} placeholder=\"Client Name\" required />\r\n                <input type=\"text\" value={clientContact} onChange={(e) => setClientContact(e.target.value)} placeholder=\"Client Contact\" required />\r\n                <input type=\"text\" value={paintType} onChange={(e) => setPaintType(e.target.value)} placeholder=\"Paint Type\" required />\r\n                <input type=\"text\" value={colorCode} onChange={(e) => setColorCode(e.target.value)} placeholder=\"Color Code\" />\r\n                <select value={category} onChange={(e) => setCategory(e.target.value)}>\r\n                    <option value=\"New Mix\">New Mix</option>\r\n                    <option value=\"Reorder Mix\">Reorder Mix</option>\r\n                    <option value=\"Colour Code\">Colour Code</option>\r\n                </select>\r\n                <button type=\"submit\" disabled={!isFormValid || loading}>\r\n                    {loading ? \"Submitting...\" : \"Submit Order\"}\r\n                </button>\r\n            </form>\r\n            {message && <p>{message}</p>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AddOrder;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}